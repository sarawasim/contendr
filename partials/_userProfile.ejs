<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="css/profile.css" />
    <script
      src="https://kit.fontawesome.com/761d42c757.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="container-profile">
      <div class="user-profile">
        <div class="circle-crop">
          <img
            src="../assets/dp-placeholder.png"
            alt="display picture"
            id="displayPic-profile"
          />
        </div>
        <div class="userInfo">
          <h1 class="username-profile"><%-user.username%></h1>
          <p class="bio">Bio</p>
        </div>
        <div class="settings">
          <i class="fas fa-cog"></i>
        </div>
      </div>

      <div class="userInfo-Profile">
        <div class="followers">
          <p>
            <a href="showFollowers?username=<%=user.username%>">Followers</a>
          </p>
          <p class="bold"><%= user.followers.length %></p>
        </div>
        <div class="following">
          <p>
            <a href="showFollowing?username=<%=user.username%>">Following</a>
          </p>
          <p class="bold"><%= user.following.length %></p>
        </div>
        <div class="challenges-won">
          <p>Challenges</p>
          <p class="bold"><%= user.posts.length%></p>
        </div>
      </div>

      <!-- <%- JSON.stringify(posts) %> -->
      <div class="userPosts-Profile">
        <% for(let i= posts.length-1; i >=0; i--) { if (posts[i].player1
        == user.username) { %>
        <div class="profilePost">
          <a href="/p?postId=<%= posts[i]['postId'] %>" class="post-gradient">
            <% if (posts[i]["p1FileType"] === "video/mp4" ||
            posts[i]["p1FileType"] === "video/quicktime") { %>

            <video
              src="<%= posts[i]['p1URL'] %>"
              muted
              loop
              id="postImage"
              autoplay
            ></video>

            <% } else { %>
            <img src="<%= posts[i]['p1URL'] %>" id="postImage" />
            <% } %>
          </a>
        </div>
        <% } if (posts[i].player2 == user.username) { %>
        <div class="profilePost">
          <% if (!posts[i].isAccepted) { %>
            <a href="/accept?postId=<%= posts[i]['postId'] %>" class="post-gradient">



          <% } else { %>
            <a href="/p?postId=<%= posts[i]['postId'] %>" class="post-gradient">
          <% } %>
            <% if (posts[i]["p2FileType"] === "video/mp4" ||
            posts[i]["p2FileType"] === "video/quicktime") { %>

            <video
              src="<%= posts[i]['p2URL'] %>"
              muted
              loop
              id="postImage"
              autoplay
            ></video>

            <% } else { %>
            <img src="<%= posts[i]['p2URL'] %>" id="postImage" />
            <% } %>
          </a>
        </div>
        <% } }%>
      </div>
    </div>
  </body>
</html>
